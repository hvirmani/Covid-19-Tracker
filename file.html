<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<style>
		* {
		}

		body {
			background: #121212;
		}

		.main {
			width: 85%;
			background: #121212;
			margin: auto;
			padding: 2%;
		}

		.graph div div {
			margin: 2% 0%;
		}

		#clearfix {
			content: '';
			clear: both;
		}

		#recoveries_graph,
		#cases_graph {
			margin: 50px;
		}
	</style>
	<title>Document</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	<script type="text/javascript">
		google.charts.load("current", {
			packages: ["corechart"]
		});
		google.charts.setOnLoadCallback(drawChart);

		function drawChart() {
			var data = google.visualization.arrayToDataTable([
				['Recovered', 'Not-Recovered'],
				['Recovered', parseFloat(a / b * 100)],
				['Not Recovered', 100 - parseFloat(a / b * 100)],

			]);

			var options = {
				 pieSliceTextStyle :{fontsize : 16, color: 'transparent'},
        slices: {
            0: { color: '#09b4ff'},
            1: { color: '#444'}
        },
				title: 'Fatality-Rate',
				pieHole:  0.70,
				colors: ['#3a4cb7', '#dde1e7'],
				responsive: true, labels: false,
				backgroundColor: {
					fill: '#1e1e1e'
				},
				titleTextStyle: {
					color: '#188e82',
					fontSize:20,
				},
				legend: {
					position: 'bottom',
					textStyle: {color: 'white'}
				},
			};

			var chart = new google.visualization.PieChart(document.getElementById('recovery_piechart'));
			chart.draw(data, options);
		}
	</script>
	<script type="text/javascript">
		google.charts.load("current", {
			packages: ["corechart"]
		});
		google.charts.setOnLoadCallback(drawChart);
		function drawChart() {
			var data = google.visualization.arrayToDataTable([
				['Death', 'Active&Recovered', {
					role: 'style'
				}],
				['Death', parseFloat(c / b * 100), 'color: #e5e4e2'],
				['Active & Recovered', 100 - parseFloat(c / b * 100), 'green'],

			]);

			var options = {
				 pieSliceTextStyle :{fontsize : 16, color: 'transparent'},
        slices: {
            0: { color: 'orangered'},
            1: { color: '#444'}
        },
				title: 'Fatality-Rate',
				pieHole:  0.70,
				colors: ['#3a4cb7', '#dde1e7'],
				responsive: true, labels: false,
				backgroundColor: {
					fill: '#1e1e1e'
				},
				titleTextStyle: {
					color: '#188e82',
					fontSize:20,
				},
				legend: {
					position: 'bottom',
					textStyle: {color: 'white'}
				},
			};

			var chart = new google.visualization.PieChart(document.getElementById('fatality_piechart'));
			chart.draw(data, options);
		}
	</script>
	<script type="text/javascript">
		google.charts.load('current', {
			'packages': ['corechart']
		});
		google.charts.setOnLoadCallback(drawChart);

		function drawChart() {
			console.log(arr);
			var data = google.visualization.arrayToDataTable(arr);

			var options = {
				title: 'Confirmed Cases',
				curveType: 'function',
				hAxis: {
					textStyle: {
						color: 'gray',
						fontSize:12,
					}
				},

				titleTextStyle: {
					color: '#188e82',
					fontSize:20,
				},
				vAxis: {
					textStyle: {
						color: 'gray',
						fontSize:12,
					},
					gridlines: {
						color: 'transparent'
					}
				},
				backgroundColor: {
					fill: '#1e1e1e'
				},
				legend: {
					position: 'bottom',
					textStyle: {color: 'white'}
				},
				colors: ['#3a4cb7']
			};

			var chart = new google.visualization.LineChart(document.getElementById('cases_graph'));

			chart.draw(data, options);
		}
	</script>
	<script type="text/javascript">
		google.charts.load('current', {
			'packages': ['corechart']
		});
		google.charts.setOnLoadCallback(drawChart);

		function drawChart() {
			var data = google.visualization.arrayToDataTable(arr_1);

			var options = {
				title: 'Recovered Cases',
				curveType: 'function',
				hAxis: {
					textStyle: {
						color: 'gray',
						fontSize:12,
					}
				},

				titleTextStyle: {
					color: '#188e82',
					fontSize:20,
				},
				vAxis: {
					textStyle: {
						color: 'gray',
						fontSize:12,
					},
					gridlines: {
						color: 'transparent'
					}
				},
				backgroundColor: {
					fill: '#1e1e1e'
				},
				legend: {
					position: 'bottom',
					textStyle: {color: 'white'}
				},
				colors: ['orangered']
			};

			var chart = new google.visualization.LineChart(document.getElementById('recoveries_graph'));

			chart.draw(data, options);
		}
	</script>
	<script>
		var arr = [],
			arr_1 = [],
			j = 0,
			i = 0,
			a, b, c;

		const url = "https://api.covid19india.org/data.json";
		fetch(url)
			.then((res) => {
				return res.json();
			})
			.then((data) => {
				j = 0;
				arr[0] = ['Date', 'Total Cases'];
				arr_1[0] = ['Date', 'Recovered Cases'];
				j =30;
				for (i = data.cases_time_series.length - 1; j > 0; i--) {
					var arr1 = [],
						arr2 = [];
					arr1[0] = data.cases_time_series[i].date;
					arr2[0] = data.cases_time_series[i].date;
					arr1[1] = parseInt(data.cases_time_series[i].totalconfirmed);
					arr2[1] = parseInt(data.cases_time_series[i].totalrecovered);
					arr[j] = arr1;
					arr_1[j] = arr2;
					j--;
				}
				console.log(arr);
				console.log(data.cases_time_series[0]);
				//arr[0]['Work', 9];
				a = data.statewise[0].recovered;
				b = data.statewise[0].confirmed;
				c = data.statewise[0].deaths;
				document.getElementById("total_cases").innerHTML = b;
				document.getElementById("total_recovered").innerHTML = a;
				document.getElementById("total_deaths").innerHTML = c;
			})
	</script>
</head>

<body>
	<div class="head">
		<h1>Coronavirus Tracker</h1>
	</div>
	<div class="main">

		<div class="info">
			<div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 ">
				<div id="total_cases">

				</div>
			</div>
			<div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
				<div id="total_recovered">

				</div>
			</div>
			<div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
				<div id="total_deaths">

				</div>
			</div>
		</div>
		<div id="clearfix">

		</div>
		<div class="graph">
			<div class="a">
				<div class="col-lg-6 col-md-6 col-sm-12 col-xs-12" >
					<div id="recovery_piechart" style="width: 500px;height: 300px;margin: auto;">

					</div>
				</div>
				<div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
					<div id="fatality_piechart" style="width: 500px;height: 300px;margin: auto;">

					</div>
				</div>
			</div>
			<div class="b">
				<div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
<div id="cases_graph" style="width: 500px;height: 300px;margin: auto;">

		</div>
				</div>
				<div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
					<div id="recoveries_graph" style="width: 500px;height: 300px;margin: auto;">

					</div>
				</div>
			</div>
			<!--<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
				<div id="cases_graph">

		</div>
			</div>-->
		</div>
		<div id="clearfix">

		</div>
		
	</div>
</body>

</html>